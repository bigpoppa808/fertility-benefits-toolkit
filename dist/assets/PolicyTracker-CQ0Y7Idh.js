import{r as d,j as e}from"./ui-Bk84lonQ.js";import{P as D,M as o,L as b,I as z,S as M}from"./supabase-Cjm6zX4J.js";import{c as g,C as t,g as i,L as O,G as l,T as R,b as x,d as m,B as T}from"./index-CyKNymR9.js";import{e as V,T as $,b as K,c as h,d as j}from"./useDataFetching-Cgp5jQPo.js";import{p as C,f as J}from"./utils-D6KXEzZh.js";import{F as Q,S as U}from"./search-blCPs1sF.js";import"./vendor-DeqkGhWy.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=g("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=g("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=g("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=g("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),E=["Government Benefits","State Legislation","International Legislation","Tax Policy","Policy Analysis"],Z=["United States","California","New York","European Union","Global"];function ne(){const[F,B]=d.useState("recent"),[c,k]=d.useState(""),[u,P]=d.useState(""),[f,L]=d.useState(""),{data:n,isLoading:q,error:_}=V(),r=n.filter(s=>{const a=!c||s.title.toLowerCase().includes(c.toLowerCase())||(s.description||"").toLowerCase().includes(c.toLowerCase()),w=!u||s.policy_type===u,H=!f||s.region===f;return a&&w&&H}),I=E.map(s=>({type:s,count:n.filter(a=>a.policy_type===s).length})),y=r.filter(s=>s.effective_date&&C(s.effective_date)>new Date(Date.now()-6*30*24*60*60*1e3)).sort((s,a)=>new Date(a.effective_date||0).getTime()-new Date(s.effective_date||0).getTime()),v=r.filter(s=>s.effective_date&&C(s.effective_date)>new Date).sort((s,a)=>new Date(s.effective_date||0).getTime()-new Date(a.effective_date||0).getTime()),G=s=>s.toLowerCase().includes("major")||s.toLowerCase().includes("significant")?"bg-red-100 text-red-800":s.toLowerCase().includes("moderate")?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",A=s=>{switch(s){case"Government Benefits":return e.jsx(l,{className:"w-4 h-4"});case"State Legislation":return e.jsx(R,{className:"w-4 h-4"});case"International Legislation":return e.jsx(l,{className:"w-4 h-4"});case"Tax Policy":return e.jsx(p,{className:"w-4 h-4"});default:return e.jsx(S,{className:"w-4 h-4"})}},N=s=>e.jsxs(t,{className:"card-hover",children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(m,{className:"text-lg",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[A(s.policy_type||""),e.jsx("span",{children:s.policy_type})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(l,{className:"w-4 h-4"}),e.jsx("span",{children:s.region})]}),s.effective_date&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.effective_date).toLocaleDateString()})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:s.source_url&&e.jsx(T,{variant:"outline",size:"sm",onClick:()=>window.open(s.source_url,"_blank"),children:e.jsx(X,{className:"w-4 h-4"})})})]})}),e.jsxs(i,{children:[e.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),s.impact_assessment&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Impact Assessment"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.impact_assessment})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Updated ",J(C(s.updated_at))," ago"]}),s.impact_assessment&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${G(s.impact_assessment)}`,children:"Impact Assessment Available"})]})]})]},s.id),Y=e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(T,{variant:"outline",className:"flex items-center space-x-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:"Set Alerts"})]})});return _?e.jsx(D,{title:"Policy Tracker",description:"Monitor fertility-related policy changes and legislation",children:e.jsx(t,{children:e.jsxs(i,{className:"text-center py-8",children:[e.jsx(S,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Policies"}),e.jsx("p",{className:"text-gray-600",children:_})]})})}):e.jsx(D,{title:"Predictive Policy Tracker Dashboard",description:"Real-time monitoring of fertility-related legislation and policy changes",actions:Y,children:q?e.jsx(t,{children:e.jsx(i,{className:"flex items-center justify-center h-64",children:e.jsx(O,{size:"lg",text:"Loading policy data..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(o,{title:"Total Policies Tracked",value:n.length,icon:l}),e.jsx(o,{title:"Recent Updates",value:y.length,icon:R,description:"Last 6 months"}),e.jsx(o,{title:"Upcoming Changes",value:v.length,icon:p,description:"Future effective dates"}),e.jsx(o,{title:"Active Regions",value:new Set(n.map(s=>s.region).filter(Boolean)).size,icon:l})]}),e.jsxs(t,{children:[e.jsx(x,{children:e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{children:"Filter & Search"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"search",children:"Search Policies"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(z,{id:"search",value:c,onChange:s=>k(s.target.value),placeholder:"Search by title or description",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"policy-type",children:"Policy Type"}),e.jsxs(M,{id:"policy-type",value:u,onChange:s=>P(s.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),E.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"region",children:"Region"}),e.jsxs(M,{id:"region",value:f,onChange:s=>L(s.target.value),children:[e.jsx("option",{value:"",children:"All Regions"}),Z.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(T,{variant:"outline",onClick:()=>{k(""),P(""),L("")},className:"w-full",children:"Clear Filters"})})]})})]}),e.jsxs($,{value:F,onValueChange:B,children:[e.jsxs(K,{className:"grid w-full grid-cols-4",children:[e.jsx(h,{value:"recent",children:"Recent Updates"}),e.jsx(h,{value:"upcoming",children:"Upcoming Changes"}),e.jsx(h,{value:"all",children:"All Policies"}),e.jsx(h,{value:"analytics",children:"Analytics"})]}),e.jsx(j,{value:"recent",className:"space-y-4",children:y.length>0?e.jsx("div",{className:"space-y-4",children:y.map(N)}):e.jsx(t,{children:e.jsxs(i,{className:"text-center py-8",children:[e.jsx(p,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Recent Updates"}),e.jsx("p",{className:"text-gray-600",children:"No policy updates found in the last 6 months matching your filters."})]})})}),e.jsx(j,{value:"upcoming",className:"space-y-4",children:v.length>0?e.jsx("div",{className:"space-y-4",children:v.map(N)}):e.jsx(t,{children:e.jsxs(i,{className:"text-center py-8",children:[e.jsx(S,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Upcoming Changes"}),e.jsx("p",{className:"text-gray-600",children:"No upcoming policy changes found matching your filters."})]})})}),e.jsx(j,{value:"all",className:"space-y-4",children:r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(N)}):e.jsx(t,{children:e.jsxs(i,{className:"text-center py-8",children:[e.jsx(U,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Policies Found"}),e.jsx("p",{className:"text-gray-600",children:"No policies found matching your current filters."})]})})}),e.jsxs(j,{value:"analytics",className:"space-y-6",children:[e.jsxs(t,{children:[e.jsx(x,{children:e.jsx(m,{children:"Policy Distribution by Type"})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:I.map(({type:s,count:a})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[A(s),e.jsx("span",{className:"text-sm",children:s})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${a/Math.max(...I.map(w=>w.count),1)*100}%`}})}),e.jsx("span",{className:"text-sm font-medium w-8 text-right",children:a})]})]},s))})})]}),e.jsxs(t,{children:[e.jsx(x,{children:e.jsx(m,{children:"Key Policy Insights"})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"FEHB Expansion Impact"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Federal employees now have comprehensive fertility coverage, creating competitive pressure on private employers."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"State-Level Progress"}),e.jsx("p",{className:"text-sm text-gray-600",children:"California and New York leading with comprehensive fertility insurance mandates."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"International Standards"}),e.jsx("p",{className:"text-sm text-gray-600",children:"EU directive establishing minimum fertility care standards across member states."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Tax Incentives"}),e.jsx("p",{className:"text-sm text-gray-600",children:"New York introducing tax credits for employers providing fertility benefits."})]})]})]})})]})]})]})]})})}export{ne as PolicyTracker};
