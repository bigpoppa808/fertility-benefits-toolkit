import{r as o,j as e}from"./ui-Bk84lonQ.js";import{P as K,M as f,L as y,I as se,S as T}from"./supabase-Cjm6zX4J.js";import{c as L,C as l,g as i,G as A,L as re,a as b,f as p,b as c,d as n,B as R}from"./index-CyKNymR9.js";import{f as te,T as ae,b as le,c as N,d as _}from"./useDataFetching-Cgp5jQPo.js";import{D as ie}from"./dollar-sign-BxoY3-RB.js";import{F as ce,S as ne}from"./search-blCPs1sF.js";import{R as oe,S as de,C as xe,X as me,Y as he,T as pe,f as ge}from"./charts-DMaRy_Rc.js";import"./vendor-DeqkGhWy.js";import"./utils-D6KXEzZh.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=L("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=L("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=L("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ue=["North America","Europe","Asia","Oceania","Middle East"],ve=["Very Mature","Mature","Developing","Emerging"],fe=["Very High","High","Medium","Low"];function Ae(){var H,U;const[z,Y]=o.useState("overview"),[C,E]=o.useState(""),[w,F]=o.useState(""),[S,G]=o.useState(""),[k,$]=o.useState(""),[h,X]=o.useState([]),[m,J]=o.useState("coverage"),[d,D]=o.useState("desc"),{data:x,isLoading:Z,error:V}=te(),M=[...x.filter(s=>{const r=!C||s.country.toLowerCase().includes(C.toLowerCase()),t=!w||s.region===w,a=!S||s.market_maturity===S,ee=!k||s.government_support_level===k;return r&&t&&a&&ee})].sort((s,r)=>{let t=0,a=0;switch(m){case"country":t=s.country,a=r.country;break;case"coverage":t=s.fertility_benefit_coverage||0,a=r.fertility_benefit_coverage||0;break;case"cost":t=s.average_treatment_cost||0,a=r.average_treatment_cost||0;break;case"support":t=s.government_support_level||"",a=r.government_support_level||"";break}return typeof t=="string"&&typeof a=="string"?d==="asc"?t.localeCompare(a):a.localeCompare(t):d==="asc"?t-a:a-t}),j=[...x].sort((s,r)=>(r.fertility_benefit_coverage||0)-(s.fertility_benefit_coverage||0)).slice(0,3),u=[...x].filter(s=>s.average_treatment_cost&&s.average_treatment_cost>0).sort((s,r)=>(s.average_treatment_cost||0)-(r.average_treatment_cost||0)).slice(0,3),B=x.filter(s=>s.fertility_benefit_coverage&&s.average_treatment_cost).map(s=>({country:s.country,coverage:(s.fertility_benefit_coverage||0)*100,cost:s.average_treatment_cost||0,region:s.region})),v=s=>{m===s?D(d==="asc"?"desc":"asc"):(J(s),D("desc"))},Q=s=>{X(r=>r.includes(s)?r.filter(t=>t!==s):r.length<4?[...r,s]:r)},O=s=>{switch(s){case"Very Mature":return"bg-green-100 text-green-800";case"Mature":return"bg-blue-100 text-blue-800";case"Developing":return"bg-yellow-100 text-yellow-800";case"Emerging":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},I=s=>{switch(s){case"Very High":return"bg-green-500";case"High":return"bg-blue-500";case"Medium":return"bg-yellow-500";case"Low":return"bg-red-500";default:return"bg-gray-500"}},P=s=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Country"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Coverage Rate"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Avg. Treatment Cost"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Government Support"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Market Maturity"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Popular Treatments"})]})}),e.jsx("tbody",{children:s.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border border-gray-200 px-4 py-2 font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:r.country})]})}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:r.fertility_benefit_coverage?b(r.fertility_benefit_coverage*100):"N/A"}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:r.average_treatment_cost?p(r.average_treatment_cost):"N/A"}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${I(r.government_support_level||"")}`}),e.jsx("span",{className:"text-sm",children:r.government_support_level})]})}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(r.market_maturity||"")}`,children:r.market_maturity})}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(r.popular_treatments||[]).slice(0,3).map((t,a)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:t},a))})})]},r.id))})]})}),W=e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(R,{variant:"outline",className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:"Export Comparison"})]})});return V?e.jsx(K,{title:"Global Comparator",description:"Compare international fertility benefits across countries",children:e.jsx(l,{children:e.jsxs(i,{className:"text-center py-8",children:[e.jsx(A,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-600",children:V})]})})}):e.jsx(K,{title:"Global Benchmark Comparator Tool",description:"Interactive comparison of international fertility benefits policies and markets",actions:W,children:Z?e.jsx(l,{children:e.jsx(i,{className:"flex items-center justify-center h-64",children:e.jsx(re,{size:"lg",text:"Loading global benchmark data..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(f,{title:"Countries Tracked",value:x.length,icon:A}),e.jsx(f,{title:"Highest Coverage",value:j[0]?b((j[0].fertility_benefit_coverage||0)*100):"N/A",description:(H=j[0])==null?void 0:H.country,icon:je}),e.jsx(f,{title:"Most Affordable",value:u[0]?p(u[0].average_treatment_cost||0):"N/A",description:(U=u[0])==null?void 0:U.country,icon:ie}),e.jsx(f,{title:"Regions Covered",value:new Set(x.map(s=>s.region).filter(Boolean)).size,icon:q})]}),e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(n,{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{children:"Filter & Search"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"search",children:"Search Countries"}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(se,{id:"search",value:C,onChange:s=>E(s.target.value),placeholder:"Search countries",className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"region",children:"Region"}),e.jsxs(T,{id:"region",value:w,onChange:s=>F(s.target.value),children:[e.jsx("option",{value:"",children:"All Regions"}),ue.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"maturity",children:"Market Maturity"}),e.jsxs(T,{id:"maturity",value:S,onChange:s=>G(s.target.value),children:[e.jsx("option",{value:"",children:"All Levels"}),ve.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"support",children:"Government Support"}),e.jsxs(T,{id:"support",value:k,onChange:s=>$(s.target.value),children:[e.jsx("option",{value:"",children:"All Levels"}),fe.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(R,{variant:"outline",onClick:()=>{E(""),F(""),G(""),$("")},className:"w-full",children:"Clear Filters"})})]})})]}),e.jsxs(ae,{value:z,onValueChange:Y,children:[e.jsxs(le,{className:"grid w-full grid-cols-4",children:[e.jsx(N,{value:"overview",children:"Overview"}),e.jsx(N,{value:"comparison",children:"Side-by-Side"}),e.jsx(N,{value:"rankings",children:"Rankings"}),e.jsx(N,{value:"analysis",children:"Analysis"})]}),e.jsxs(_,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(n,{children:"Highest Coverage Countries"})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:j.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${r===0?"bg-yellow-400 text-yellow-900":r===1?"bg-gray-300 text-gray-700":"bg-orange-300 text-orange-900"}`,children:r+1}),e.jsx("span",{className:"font-medium",children:s.country})]}),e.jsx("span",{className:"text-sm font-bold",children:b((s.fertility_benefit_coverage||0)*100)})]},s.id))})})]}),e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(n,{children:"Most Affordable Treatment"})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:u.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${r===0?"bg-green-400 text-green-900":r===1?"bg-blue-300 text-blue-900":"bg-purple-300 text-purple-900"}`,children:r+1}),e.jsx("span",{className:"font-medium",children:s.country})]}),e.jsx("span",{className:"text-sm font-bold",children:p(s.average_treatment_cost||0)})]},s.id))})})]})]}),e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(n,{children:"Regional Overview"})}),e.jsx(i,{children:P(M.slice(0,10))})]})]}),e.jsxs(_,{value:"comparison",className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(n,{children:"Select Countries to Compare (up to 4)"})}),e.jsx(i,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:M.map(s=>e.jsx(R,{variant:h.includes(s.country)?"default":"outline",size:"sm",onClick:()=>Q(s.country),disabled:!h.includes(s.country)&&h.length>=4,className:"justify-start",children:s.country},s.id))})})]}),h.length>0&&e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(n,{children:"Side-by-Side Comparison"})}),e.jsx(i,{children:P(x.filter(s=>h.includes(s.country)))})]})]}),e.jsx(_,{value:"rankings",className:"space-y-6",children:e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(n,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Global Rankings"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Click headers to sort"})]})]})}),e.jsx(i,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left cursor-pointer hover:bg-gray-100",onClick:()=>v("country"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Country"}),m==="country"&&e.jsx(g,{className:`w-3 h-3 ${d==="desc"?"rotate-180":""}`})]})}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left cursor-pointer hover:bg-gray-100",onClick:()=>v("coverage"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Coverage Rate"}),m==="coverage"&&e.jsx(g,{className:`w-3 h-3 ${d==="desc"?"rotate-180":""}`})]})}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left cursor-pointer hover:bg-gray-100",onClick:()=>v("cost"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Treatment Cost"}),m==="cost"&&e.jsx(g,{className:`w-3 h-3 ${d==="desc"?"rotate-180":""}`})]})}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left cursor-pointer hover:bg-gray-100",onClick:()=>v("support"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Gov Support"}),m==="support"&&e.jsx(g,{className:`w-3 h-3 ${d==="desc"?"rotate-180":""}`})]})}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Region"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Maturity"})]})}),e.jsx("tbody",{children:M.map((s,r)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-500 w-6",children:["#",r+1]}),e.jsx("span",{className:"font-medium",children:s.country})]})}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:s.fertility_benefit_coverage?b(s.fertility_benefit_coverage*100):"N/A"}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:s.average_treatment_cost?p(s.average_treatment_cost):"N/A"}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${I(s.government_support_level||"")}`}),e.jsx("span",{className:"text-sm",children:s.government_support_level})]})}),e.jsx("td",{className:"border border-gray-200 px-4 py-2 text-sm",children:s.region}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(s.market_maturity||"")}`,children:s.market_maturity})})]},s.id))})]})})})]})}),e.jsxs(_,{value:"analysis",className:"space-y-6",children:[B.length>0&&e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(n,{children:"Cost vs Coverage Analysis"})}),e.jsxs(i,{children:[e.jsx("div",{className:"h-64 w-full",children:e.jsx(oe,{width:"100%",height:"100%",children:e.jsxs(de,{margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(xe,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(me,{dataKey:"coverage",name:"Coverage Rate",tickFormatter:s=>`${s}%`,className:"text-sm"}),e.jsx(he,{dataKey:"cost",name:"Treatment Cost",tickFormatter:s=>`$${(s/1e3).toFixed(0)}K`,className:"text-sm"}),e.jsx(pe,{formatter:(s,r)=>[r==="Coverage Rate"?`${s}%`:p(s),r],labelFormatter:(s,r)=>r&&r[0]?r[0].payload.country:"",contentStyle:{backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"1px solid #e2e8f0",borderRadius:"0.375rem"}}),e.jsx(ge,{data:B,fill:"#3b82f6"})]})})}),e.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"This chart shows the relationship between fertility benefit coverage rates and average treatment costs across countries. Countries in the upper left quadrant offer high coverage at lower costs."})]})]}),e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(n,{children:"Global Market Insights"})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Coverage Leaders"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Israel, Denmark, and the UK lead in fertility benefit coverage rates, with government support playing a key role."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Cost Efficiency"}),e.jsx("p",{className:"text-sm text-gray-600",children:"European countries generally offer lower treatment costs due to government subsidies and regulated healthcare systems."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Market Maturity"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Mature markets show higher adoption rates and more comprehensive treatment options."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Opportunity Markets"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Asian markets like Japan and Singapore show growing potential with increasing government support."})]})]})]})})]})]})]})]})})}export{Ae as GlobalComparator};
