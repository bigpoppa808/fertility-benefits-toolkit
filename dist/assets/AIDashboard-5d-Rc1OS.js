import{j as e,r as y}from"./ui-Bk84lonQ.js";import{s as Z,P as J,M as f,L as v,S as M,I as L}from"./supabase-DakwwTc7.js";import{c as K,a as C,h as A,f as q,T as z,i as B,C as c,b as m,d as p,g as d,L as E,B as P,R as ee}from"./index-TFloIovd.js";import{u as se,a as te,T as ae,b as re,c as k,d as S}from"./useDataFetching-B9yLehr2.js";import{R as W,P as ie,b as ne,c as le,T as H,L as Y,d as ce,C as de,X as oe,Y as he,e as xe}from"./charts-DMaRy_Rc.js";import{U as F,t as $}from"./toast-wmUkgIna.js";import{D as me}from"./dollar-sign-BXGhzf3a.js";import"./vendor-DeqkGhWy.js";import"./utils-D6KXEzZh.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=K("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=K("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),O=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];function ge({data:h}){const g=h.map((i,t)=>({name:i.industry_name,value:(i.fertility_benefit_adoption_rate||0)*100,color:O[t%O.length]})),j=({active:i,payload:t})=>{if(i&&t&&t.length){const o=t[0].payload;return e.jsxs("div",{className:"bg-white p-3 shadow-lg border rounded",children:[e.jsx("p",{className:"font-medium",children:o.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Adoption Rate: ",C(o.value)]})]})}return null};return e.jsx("div",{className:"h-64 w-full",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(ie,{children:[e.jsx(ne,{data:g,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:g.map((i,t)=>e.jsx(le,{fill:i.color},`cell-${t}`))}),e.jsx(H,{content:j}),e.jsx(Y,{formatter:(i,t)=>`${i}: ${C(t.payload.value)}`,wrapperStyle:{fontSize:"12px"}})]})})})}function G({data:h,dataKey:g,title:j}){const i=h.filter(a=>a.year&&a.statistic_value).map(a=>({year:a.year,value:a.statistic_value,name:a.statistic_name,unit:a.statistic_unit})).sort((a,n)=>(a.year||0)-(n.year||0)),t=(a,n,l)=>{var u;const r=(u=l.payload)==null?void 0:u.unit;return r==="billion USD"||r==="USD"?[q(a*(r==="billion USD"?1e9:1)),n]:[A(a),n]},o=a=>{const n=i[0];return(n==null?void 0:n.unit)==="billion USD"?`$${a}B`:(n==null?void 0:n.unit)==="percentage"?`${a}%`:A(a)};return e.jsx("div",{className:"h-64 w-full",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(ce,{data:i,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(de,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(oe,{dataKey:"year",className:"text-sm"}),e.jsx(he,{tickFormatter:o,className:"text-sm"}),e.jsx(H,{formatter:t,contentStyle:{backgroundColor:"white",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"1px solid #e2e8f0",borderRadius:"0.375rem"}}),e.jsx(Y,{}),e.jsx(xe,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3b82f6",strokeWidth:2}})]})})})}function ue(){const[h,g]=y.useState(!1),[j,i]=y.useState(null),[t,o]=y.useState(null);return{generateInsights:async n=>{g(!0),i(null);try{const{data:l,error:r}=await Z.functions.invoke("ai-insights",{body:n});if(r)throw new Error(r.message||"Failed to generate insights");if(l!=null&&l.error)throw new Error(l.error.message||"AI insight generation failed");return o(l.data),l.data}catch(l){const r=l.message||"An unexpected error occurred";throw i(r),new Error(r)}finally{g(!1)}},insights:t,isLoading:h,error:j,clearError:()=>i(null)}}const U=["Technology","Healthcare","Financial Services","Manufacturing","Retail","Professional Services"],je=[{value:"market_positioning",label:"Market Positioning"},{value:"competitive_analysis",label:"Competitive Analysis"},{value:"implementation_strategy",label:"Implementation Strategy"},{value:"roi_analysis",label:"ROI Analysis"},{value:"general",label:"General Insights"}];function Me(){const[h,g]=y.useState("Technology"),[j,i]=y.useState("overview"),[t,o]=y.useState({companySize:500,industry:"Technology",location:"",insightType:"market_positioning",specificQuestions:[]}),{data:a}=se(),{data:n}=te(),{generateInsights:l,insights:r,isLoading:u,error:T}=ue(),Q=[a.find(s=>s.statistic_name.includes("Fertility Market Size 2025")),a.find(s=>s.statistic_name.includes("Employer Adoption Rate")),a.find(s=>s.statistic_name.includes("Would Switch for Benefits")),a.find(s=>s.statistic_name.includes("ROI Range High"))].filter(Boolean),b=n.filter(s=>!h||s.industry_name===h),N=a.filter(s=>s.statistic_name.includes("Market")&&s.year),R=async()=>{try{const s={companyData:{industry:t.industry,companySize:t.companySize,location:t.location||void 0},benchmarkData:b,insightType:t.insightType,specificQuestions:t.specificQuestions};await l(s),$.success("AI insights generated successfully!")}catch(s){$.error(s.message||"Failed to generate insights")}},V=e.jsxs(P,{onClick:R,disabled:u,className:"flex items-center space-x-2",children:[u?e.jsx(E,{size:"sm"}):e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"Generate AI Insights"})]});return e.jsx(J,{title:"AI-Powered Fertility Benefits Dashboard",description:"Market intelligence and strategic insights for fertility benefits implementation",actions:V,children:e.jsxs(ae,{value:j,onValueChange:i,className:"space-y-6",children:[e.jsxs(re,{className:"grid w-full grid-cols-4",children:[e.jsx(k,{value:"overview",children:"Market Overview"}),e.jsx(k,{value:"benchmarks",children:"Industry Benchmarks"}),e.jsx(k,{value:"trends",children:"Market Trends"}),e.jsx(k,{value:"ai-insights",children:"AI Insights"})]}),e.jsxs(S,{value:"overview",className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Q.map((s,x)=>{if(!s)return null;const w=s.statistic_value||0;let I=A(w);s.statistic_unit==="billion USD"?I=`$${w}B`:s.statistic_unit==="percentage"?I=`${w}%`:s.statistic_unit==="multiplier"&&(I=`${w}x`);const D=[me,F,z,B],X=D[x%D.length];return e.jsx(f,{title:s.statistic_name.replace(/\d{4}/,"").trim(),value:I,description:s.source||"",icon:X},s.id)})}),N.length>0&&e.jsxs(c,{children:[e.jsx(m,{children:e.jsx(p,{children:"Market Growth Projection"})}),e.jsx(d,{children:e.jsx(G,{data:N,dataKey:"value",title:"Fertility Market Growth"})})]}),e.jsxs(c,{children:[e.jsx(m,{children:e.jsx(p,{children:"2025 Market Snapshot"})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"$9B"}),e.jsx("p",{className:"text-sm text-gray-600",children:"US Market Size"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"42%"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Employer Adoption"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:"65%"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Would Switch Jobs"})]})]})})]})]}),e.jsxs(S,{value:"benchmarks",className:"space-y-6",children:[e.jsxs(c,{children:[e.jsx(m,{children:e.jsx(p,{children:"Industry Benchmarks"})}),e.jsxs(d,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx(v,{htmlFor:"industry-filter",children:"Filter by Industry:"}),e.jsxs(M,{id:"industry-filter",value:h,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"",children:"All Industries"}),U.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),b.length>0?e.jsx(ge,{data:b}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No benchmark data available for selected industry"})})]})]}),e.jsxs(c,{children:[e.jsx(m,{children:e.jsx(p,{children:"Detailed Industry Comparison"})}),e.jsx(d,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Industry"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Company Size"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Adoption Rate"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Avg Cost/Employee"}),e.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Avg ROI"})]})}),e.jsx("tbody",{children:b.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:s.industry_name}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:s.company_size_category}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:s.fertility_benefit_adoption_rate?C(s.fertility_benefit_adoption_rate*100):"N/A"}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:s.average_cost_per_employee?q(s.average_cost_per_employee):"N/A"}),e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:s.average_roi?`${s.average_roi.toFixed(1)}x`:"N/A"})]},s.id))})]})})})]})]}),e.jsx(S,{value:"trends",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsx(m,{children:e.jsx(p,{children:"Market Growth Trends"})}),e.jsx(d,{children:N.length>0?e.jsx(G,{data:N,dataKey:"value",title:"Market Size Growth"}):e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"No trend data available"})})})]}),e.jsxs(c,{children:[e.jsx(m,{children:e.jsx(p,{children:"Key Market Drivers"})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Employee Demand"}),e.jsx("p",{className:"text-sm text-gray-600",children:"65% of employees would switch jobs for fertility benefits"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Strong ROI"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Companies see 2-4x return through retention and productivity"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Competitive Advantage"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Only 42% of employers currently offer fertility benefits"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Market Growth"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Market projected to reach $19.7B by 2034"})]})]})]})})]})]})}),e.jsxs(S,{value:"ai-insights",className:"space-y-6",children:[e.jsxs(c,{children:[e.jsx(m,{children:e.jsxs(p,{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{children:"AI Insight Parameters"})]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"ai-industry",children:"Industry"}),e.jsx(M,{id:"ai-industry",value:t.industry,onChange:s=>o(x=>({...x,industry:s.target.value})),children:U.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"ai-company-size",children:"Company Size"}),e.jsx(L,{id:"ai-company-size",type:"number",value:t.companySize,onChange:s=>o(x=>({...x,companySize:Number(s.target.value)}))})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"ai-location",children:"Location"}),e.jsx(L,{id:"ai-location",value:t.location,onChange:s=>o(x=>({...x,location:s.target.value})),placeholder:"Optional"})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"insight-type",children:"Insight Type"}),e.jsx(M,{id:"insight-type",value:t.insightType,onChange:s=>o(x=>({...x,insightType:s.target.value})),children:je.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]})})]}),u?e.jsx(c,{children:e.jsx(d,{className:"flex items-center justify-center h-64",children:e.jsx(E,{size:"lg",text:"Generating AI insights..."})})}):r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(f,{title:"ROI Multiplier",value:r.summaryMetrics.keyMetrics.roiMultiplier,icon:z}),e.jsx(f,{title:"Market Timing",value:r.summaryMetrics.keyMetrics.marketTiming,icon:B}),e.jsx(f,{title:"Competitive Edge",value:r.summaryMetrics.keyMetrics.competitiveAdvantage,icon:F}),e.jsx(f,{title:"Priority Level",value:r.summaryMetrics.recommendations.priority,icon:pe})]}),e.jsxs(c,{children:[e.jsx(m,{children:e.jsxs(p,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"AI Strategic Insights"}),e.jsxs(P,{variant:"outline",size:"sm",onClick:R,disabled:u,children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})}),e.jsx(d,{children:e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:r.insights})})})]}),e.jsxs(c,{children:[e.jsx(m,{children:e.jsx(p,{children:"Key Recommendations"})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Implementation Timeline"}),e.jsx("p",{className:"text-sm text-gray-600",children:r.summaryMetrics.recommendations.timeline})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Expected ROI"}),e.jsx("p",{className:"text-sm text-gray-600",children:r.summaryMetrics.recommendations.expectedROI})]})]})})]})]}):e.jsx(c,{children:e.jsx(d,{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"AI Insights Ready"}),e.jsx("p",{className:"text-gray-600",children:"Configure your parameters and generate strategic insights for fertility benefits implementation."})]})})}),T&&e.jsx(c,{children:e.jsx(d,{children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("p",{className:"text-sm text-red-600",children:T})})})})]})]})})}export{Me as AIDashboard};
